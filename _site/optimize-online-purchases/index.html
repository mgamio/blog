<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="codersite for developers" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://www.codersite.dev" />
  
  <meta property="og:image" content="http://localhost:4000/assets/images/basket.jpg" />
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Optimize a basket in online purchases | CODER SITE for developers</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Optimize a basket in online purchases" />
<meta name="author" content="Moises Gamio" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Fill a basket with the most valuable goods under a given budget to optimize online purchases. Do it with bitmasks and functional programming" />
<meta property="og:description" content="Fill a basket with the most valuable goods under a given budget to optimize online purchases. Do it with bitmasks and functional programming" />
<link rel="canonical" href="http://localhost:4000/optimize-online-purchases/" />
<meta property="og:url" content="http://localhost:4000/optimize-online-purchases/" />
<meta property="og:site_name" content="CODER SITE for developers" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-09T15:18:45+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Optimize a basket in online purchases" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Moises Gamio"},"dateModified":"2022-03-29T11:38:00+02:00","datePublished":"2020-04-09T15:18:45+02:00","description":"Fill a basket with the most valuable goods under a given budget to optimize online purchases. Do it with bitmasks and functional programming","headline":"Optimize a basket in online purchases","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/optimize-online-purchases/"},"url":"http://localhost:4000/optimize-online-purchases/"}</script>
<!-- End Jekyll SEO tag -->
<title>
	   
		   Optimize a basket in online purchases
	   
    </title>
	<meta itemprop="description" name="description" content="Fill a basket with the most valuable goods under a given budget to optimize online purchases. Do it with bitmasks and functional programming" />

  <link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="CODER SITE for developers" /><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9154513114335042"
     crossorigin="anonymous"></script> 
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">CODER SITE for developers</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
		  
		     <a class="page-link" href="/about">About Me</a>
		  
		     <a class="page-link" href="/affiliate">Affiliate</a>
		  
		     <a class="page-link" href="/donate">Donate</a>
		  
		     <a class="page-link" href="/book">Book</a>
		  
        </div>
      </nav></div>
</header>
    <script async src="https://cse.google.com/cse.js?cx=381503b799c1824d4"></script>
    <div class="gcse-search"></div><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Optimize a basket in online purchases</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-04-09T15:18:45+02:00" itemprop="datePublished"><!--Apr 9, 2020 | By Moises Gamio-->Last updated: Mar 29, 2022 | By Moises Gamio</time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Optimize a basket in online purchases means fill a basket with the most valuable goods under a given budget.</p>

<p>Imagine that we have a budget of 4 US$ and we want to buy the most valuable snacks from the following table:</p>

<p><img src="/assets/images/basket.jpg" alt="basket" class="img-responsive" /></p>

<p>But who decides if a product is more valuable than another one? Well, this depends on every business. It could be an estimation based on quantitative or qualitative analysis. For instance, for our solution, we choose a quantitative approach based on which product gives us more grams per every dollar invested.</p>

<h2 id="optimize-a-basket-in-online-purchases-solution">Optimize a basket in online purchases: Solution</h2>

<p>To implement our algorithm to optimize a basket in online purchases, we use the Red-Green Refactor technique, which is the basis of test-drive-development (<a href="https://en.wikipedia.org/wiki/Test-driven_development" target="_blank">TDD</a>). Firstly, in every assumption, we will write a test and see if it fails. Secondly, we write the code that implements only that test and sees if it succeed, then we can refactor the code to make it better. Finally, we continue with another assumption and repeat the previous steps until the algorithm is successfully implemented for all tests.</p>

<p>To generalize the concept of <em>“the most valuable product”</em> we assign a <em>value</em> to every product. Our algorithm receives two parameters: an array 2-D which includes <em>[product-id][price][value]</em> and the <em>budget</em>.</p>

<p><strong>Assumption #1 – Given an array of products ordered by value, return the most valuable products</strong></p>

<p>We start defining a java test creating a new BasketOptimized class. For naming variables, you can read <a href="https://codersite.dev/clean-code/" target="_blank">clean code</a>.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="kp">public</span> <span class="k">class</span> <span class="nc">BasketOptimizedTest</span> <span class="p">{</span>
  <span class="no">BasketOptimized</span> <span class="n">basketOptimized</span><span class="p">;</span>

  <span class="vi">@Before</span>
  <span class="kp">public</span> <span class="n">void</span> <span class="n">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">basketOptimized</span> <span class="o">=</span> <span class="n">new</span> <span class="no">BasketOptimized</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="vi">@Test</span>
  <span class="kp">public</span> <span class="n">void</span> <span class="n">productsOrderedByValue</span> <span class="p">()</span> <span class="p">{</span>

    <span class="n">double</span><span class="p">[][]</span> <span class="n">myProducts</span> <span class="o">=</span> <span class="n">new</span> <span class="n">double</span><span class="p">[][]</span> <span class="p">{</span>
        <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mi">230</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mi">230</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.48</span><span class="p">,</span> <span class="mi">75</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mf">1.29</span><span class="p">,</span> <span class="mi">55</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mf">1.29</span><span class="p">,</span> <span class="mi">47</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">6</span><span class="p">,</span> <span class="mf">4.86</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">7</span><span class="p">,</span> <span class="mf">1.69</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span>
    <span class="p">};</span>

    <span class="n">double</span><span class="p">[][]</span> <span class="n">mostValueableProducts</span> <span class="o">=</span>
        <span class="n">basketOptimized</span><span class="p">.</span><span class="nf">fill</span><span class="p">(</span><span class="n">myProducts</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="n">assertEquals</span><span class="p">(</span><span class="mi">590</span><span class="n">d</span><span class="p">,</span>
        <span class="no">Arrays</span><span class="p">.</span><span class="nf">stream</span><span class="p">(</span><span class="n">mostValueableProducts</span><span class="p">).</span>
            <span class="nf">mapToDouble</span><span class="p">(</span><span class="n">arr</span> <span class="o">-&gt;</span> <span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]).</span><span class="nf">sum</span><span class="p">(),</span><span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>The first time, it should fail because the <em>fill</em> method doesn’t exist. Then we need to create an easy implementation to pass the test: the sum of the values must be equal to 590 because this represents all selected products which its prices sum less or equal than 4.</p>

<p>Now, we proceed to implement the <em>fill</em> method.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="kp">public</span> <span class="k">class</span> <span class="nc">BasketOptimized</span> <span class="p">{</span>

  <span class="kp">public</span> <span class="n">double</span><span class="p">[][]</span> <span class="n">fill</span><span class="p">(</span><span class="n">double</span><span class="p">[][]</span> <span class="n">myProducts</span><span class="p">,</span> <span class="n">double</span> <span class="n">budget</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">myProducts</span><span class="p">.</span><span class="nf">length</span><span class="p">;</span>
    <span class="n">double</span><span class="p">[][]</span> <span class="n">mostValueableProducts</span> <span class="o">=</span>  <span class="n">new</span> <span class="n">double</span><span class="p">[</span><span class="n">len</span><span class="p">][</span><span class="mi">3</span><span class="p">];</span>

    <span class="n">double</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">int</span> <span class="n">idx</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">idx</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">sum</span> <span class="o">=</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">myProducts</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span> <span class="sr">//</span><span class="n">price</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">&lt;=</span> <span class="n">budget</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mostValueableProducts</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span>
            <span class="n">myProducts</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span> <span class="sr">//i</span><span class="n">d</span>
        <span class="n">mostValueableProducts</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span>
            <span class="n">myProducts</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span> <span class="sr">//</span><span class="n">price</span>
        <span class="n">mostValueableProducts</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span>
            <span class="n">myProducts</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span> <span class="sr">//</span><span class="n">value</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">mostValueableProducts</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p><strong>Assumption #2 – Given an array of products not ordered by value, return the most valuable products</strong></p>

<p>In this case we pass a not ordered array, so we can see that our new test will fail.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vi">@Test</span>
<span class="kp">public</span> <span class="n">void</span> <span class="n">productsNotOrderedByValue</span> <span class="p">()</span> <span class="p">{</span>

  <span class="n">double</span><span class="p">[][]</span> <span class="n">myProducts</span> <span class="o">=</span> <span class="n">new</span> <span class="n">double</span><span class="p">[][]{</span>
      <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mi">230</span><span class="p">},</span>
      <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.29</span><span class="p">,</span> <span class="mi">47</span><span class="p">},</span>
      <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mf">1.69</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span>
      <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mf">1.29</span><span class="p">,</span> <span class="mi">55</span><span class="p">},</span>
      <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mi">230</span><span class="p">},</span>
      <span class="p">{</span><span class="mi">6</span><span class="p">,</span> <span class="mf">4.86</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span>
      <span class="p">{</span><span class="mi">7</span><span class="p">,</span> <span class="mf">0.48</span><span class="p">,</span> <span class="mi">75</span><span class="p">}</span>
  <span class="p">};</span>

  <span class="n">double</span><span class="p">[][]</span> <span class="n">mostValueableProducts</span> 
    <span class="o">=</span> <span class="n">basketOptimized</span><span class="p">.</span><span class="nf">fill</span><span class="p">(</span><span class="n">myProducts</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
  <span class="n">assertEquals</span><span class="p">(</span><span class="mi">590</span><span class="n">d</span><span class="p">,</span> <span class="no">Arrays</span><span class="p">.</span><span class="nf">stream</span><span class="p">(</span><span class="n">mostValueableProducts</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">mapToDouble</span><span class="p">(</span><span class="n">arr</span> <span class="o">-&gt;</span> <span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]).</span><span class="nf">sum</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>We realize that we need to order the array by value because we want the most valuable products, so its time to refactor our algorithm. What we need to do is to sort our input array.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="kp">public</span> <span class="n">double</span><span class="p">[][]</span> <span class="n">fill</span><span class="p">(</span><span class="n">double</span><span class="p">[][]</span> <span class="n">myProducts</span><span class="p">,</span> <span class="n">double</span> <span class="n">budget</span><span class="p">)</span> <span class="p">{</span>

  <span class="no">Arrays</span><span class="p">.</span><span class="nf">sort</span><span class="p">(</span><span class="n">myProducts</span><span class="p">,</span> <span class="no">Collections</span><span class="p">.</span><span class="nf">reverseOrder</span><span class="p">(</span>
      <span class="no">Comparator</span><span class="p">.</span><span class="nf">comparingDouble</span><span class="p">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">])));</span>
  <span class="n">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">myProducts</span><span class="p">.</span><span class="nf">length</span><span class="p">;</span>
  <span class="n">double</span><span class="p">[][]</span> <span class="n">mostValueableProducts</span> <span class="o">=</span>  <span class="n">new</span> <span class="n">double</span><span class="p">[</span><span class="n">len</span><span class="p">][</span><span class="mi">3</span><span class="p">];</span></code></pre></figure>

<p>Then we can see our two test cases were successful.</p>

<h3 id="calculate-combinations">Calculate combinations</h3>

<p><strong>Assumption #3 – Given an array of products, we need to obtain the most valuable products from all possible combinations of the products</strong></p>

<p>Imagine the following escenario:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">double</span><span class="p">[][]</span> <span class="n">myProducts</span> <span class="o">=</span> <span class="n">new</span> <span class="n">double</span><span class="p">[][]</span> <span class="p">{</span>
                <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mi">230</span><span class="p">},</span>
                <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.51</span><span class="p">,</span> <span class="mi">30</span><span class="p">},</span>
                <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.49</span><span class="p">,</span> <span class="mi">28</span><span class="p">},</span>
                <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mf">1.29</span><span class="p">,</span> <span class="mi">55</span><span class="p">},</span>
                <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mi">230</span><span class="p">},</span>
                <span class="p">{</span><span class="mi">6</span><span class="p">,</span> <span class="mf">4.86</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span>
                <span class="p">{</span><span class="mi">7</span><span class="p">,</span> <span class="mf">0.48</span><span class="p">,</span> <span class="mi">75</span><span class="p">},</span>
        <span class="p">};</span>

<span class="n">double</span><span class="p">[][]</span> <span class="n">mostValueableProducts</span> <span class="o">=</span> <span class="n">basketOptimized</span>
       <span class="p">.</span><span class="nf">fill</span><span class="p">(</span><span class="n">myProducts</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="n">assertEquals</span><span class="p">(</span><span class="mi">590</span><span class="n">d</span><span class="p">,</span>
      <span class="no">Arrays</span><span class="p">.</span><span class="nf">stream</span><span class="p">(</span><span class="n">mostValueableProducts</span><span class="p">)</span>
       <span class="p">.</span><span class="nf">mapToDouble</span><span class="p">(</span><span class="n">arr</span> <span class="o">-&gt;</span> <span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]).</span><span class="nf">sum</span><span class="p">(),</span><span class="mi">0</span><span class="p">);</span></code></pre></figure>

<p>The test is expecting a result of 590 which corresponds to the final price of 3,73US$ (0.98+0.98+0.48+1.29). Once the algorithm sort by value the input array, we have the following result:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mf">230.0</span><span class="p">]</span>
<span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mf">230.0</span><span class="p">]</span>
<span class="p">[</span><span class="mf">7.0</span><span class="p">,</span> <span class="mf">0.48</span><span class="p">,</span> <span class="mf">75.0</span><span class="p">]</span>
<span class="p">[</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">1.29</span><span class="p">,</span> <span class="mf">55.0</span><span class="p">]</span>
<span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.51</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">]</span>
<span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">0.49</span><span class="p">,</span> <span class="mf">28.0</span><span class="p">]</span>
<span class="p">[</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">4.86</span><span class="p">,</span> <span class="mf">14.0</span><span class="p">]</span></code></pre></figure>

<p>But here we realize the exists another combination of products which give us the most valuable products: 230+230+75+30+28 = 593 which corresponds to the final price of 3,44US$. Then we need to refactor our code to calculate all combinations (subsets) and return the most valuable products under a budget of 4 US$.</p>

<p>The subsets can be represented by all the binary options from 0 to 7 (the array size).</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mo">0000</span> <span class="o">=</span> <span class="p">{}</span>
<span class="mo">0001</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mi">230</span><span class="p">}</span> <span class="p">}</span>
<span class="mo">0010</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.51</span><span class="p">,</span> <span class="mi">30</span><span class="p">}</span> <span class="p">}</span>
<span class="mo">0011</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mi">230</span><span class="p">},</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.51</span><span class="p">,</span> <span class="mi">30</span><span class="p">}</span> <span class="p">}</span>
<span class="p">.</span>
<span class="nf">.</span>
<span class="o">.</span></code></pre></figure>

<p>We build a hashMap to store all combinations and the sum of its values. Finally, we return the first element of the hashMap ordered by value</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">myProducts</span><span class="p">.</span><span class="nf">length</span><span class="p">;</span>
<span class="n">int</span> <span class="n">numIterations</span> <span class="o">=</span> <span class="p">(</span><span class="n">int</span><span class="p">)</span> <span class="no">Math</span><span class="p">.</span><span class="nf">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">myProducts</span><span class="p">.</span><span class="nf">length</span><span class="p">);</span>

<span class="no">Map</span><span class="o">&lt;</span><span class="n">double</span><span class="p">[][],</span> <span class="no">Double</span><span class="o">&gt;</span> <span class="n">combinations</span> <span class="o">=</span> <span class="n">new</span> <span class="no">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="k">for</span> <span class="p">(</span><span class="n">int</span> <span class="n">idx</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">idx</span><span class="o">&lt;</span><span class="n">numIterations</span><span class="p">;</span> <span class="n">idx</span><span class="o">++</span><span class="p">){</span>
  <span class="n">double</span><span class="p">[][]</span> <span class="n">combx</span> <span class="o">=</span> <span class="n">new</span> <span class="n">double</span><span class="p">[</span><span class="n">len</span><span class="p">][];</span>
  <span class="n">double</span> <span class="n">sumPrice</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">double</span> <span class="n">sumValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">int</span> <span class="n">idx2</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">idx2</span><span class="o">&lt;</span><span class="n">len</span><span class="p">;</span> <span class="n">idx2</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">idx</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">int</span><span class="p">)</span> <span class="no">Math</span><span class="p">.</span><span class="nf">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">idx2</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
       <span class="n">combx</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">myProducts</span><span class="p">[</span><span class="n">idx2</span><span class="p">];</span>
       <span class="n">sumPrice</span> <span class="o">=</span> <span class="n">sumPrice</span> <span class="o">+</span> <span class="n">myProducts</span><span class="p">[</span><span class="n">idx2</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
       <span class="n">sumValue</span> <span class="o">=</span> <span class="n">sumValue</span> <span class="o">+</span> <span class="n">myProducts</span><span class="p">[</span><span class="n">idx2</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">combx</span><span class="p">.</span><span class="nf">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">sumPrice</span> <span class="o">&lt;=</span> <span class="n">budget</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">combinations</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="n">combx</span><span class="p">,</span> <span class="no">Double</span><span class="p">.</span><span class="nf">valueOf</span><span class="p">(</span><span class="n">sumValue</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>You can see the complete solution explained in detail and all test cases in this <a href="https://amzn.to/3Lst26n" target="_blank">link</a></p>

	<style> .gumroad-follow-form-embed { zoom: 1; } .gumroad-follow-form-embed:before, .gumroad-follow-form-embed:after { display: table; line-height: 0; content: ""; } .gumroad-follow-form-embed:after { clear: both; } .gumroad-follow-form-embed * { margin: 0; border: 0; padding: 0; outline: 0; box-sizing: border-box !important; float: left !important; } .gumroad-follow-form-embed input { border-radius: 4px; border-top-right-radius: 0; border-bottom-right-radius: 0; font-family: -apple-system, ".SFNSDisplay-Regular", "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 15px; line-height: 20px; background: #fff; border: 1px solid #ddd; border-right: 0; color: #aaa; padding: 10px; box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.02); background-position: top right; background-repeat: no-repeat; text-rendering: optimizeLegibility; font-smoothing: antialiased; -webkit-appearance: none; -moz-appearance: caret; width: 65% !important; height: 40px !important; } .gumroad-follow-form-embed button { border-radius: 4px; border-top-left-radius: 0; border-bottom-left-radius: 0; box-shadow: 0 1px 1px rgba(0, 0, 0, 0.12); -webkit-transition: all .05s ease-in-out; transition: all .05s ease-in-out; display: inline-block; padding: 11px 15px 12px; cursor: pointer; color: #fff; font-size: 15px; line-height: 100%; font-family: -apple-system, ".SFNSDisplay-Regular", "Helvetica Neue", Helvetica, Arial, sans-serif; background: #8fb0ff; border: 1px solid #819ee6; filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#b5d6ff, endColorstr=#84a3ec, GradientType=0)"; background: -webkit-linear-gradient(#b5d6ff, #84a3ec); background: linear-gradient(to bottom, #b5d6ff, #84a3ec); height: 40px !important; width: 35% !important; } </style> 
<p>I like to share my knowledge and experience on Java Programming, <a href="https://amzn.to/3HrGXrF" target="_blank">Coding Interview</a>, Algorithms, Data Structures, <a href="https://codersite.dev/clean-code/" target="_blank">Clean Code</a>, <a href="https://codersite.dev/solid-principles-the-definitive-guide/" target="_blank">SOLID Principles</a>, Distributed Systems, Spring Framework, <a href="https://codersite.dev/documenting-rest-api-openapi3/" target="_blank">Web Services</a>, and other Tech topics.</p>
<h3>Stay Connected!. Follow me to get updates on my latest articles.</h3>
<form action="https://app.gumroad.com/follow_from_embed_form" class="form gumroad-follow-form-embed" method="post"> <input name="seller_id" type="hidden" value="9094055701944"> <input name="email" placeholder="Your email address" type="email"> <button data-custom-highlight-color="" type="submit">Follow</button> </form>
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<br/>
<div id="share-bar">

    <h3>Share this Article:</h3>

    <div class="share-buttons">
        <a  href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000//optimize-online-purchases/"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
            title="Share on Facebook" >
            <i class="fa fa-facebook-official share-button"> facebook</i>
        </a>

        <a  href="https://twitter.com/intent/tweet?text=Optimize a basket in online purchases&url=http://localhost:4000//optimize-online-purchases/"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
            title="Share on Twitter" >
            <i class="fa fa-twitter share-button"> twitter</i>
        </a>

        <a  href="http://pinterest.com/pin/create/button/?url=http://localhost:4000//optimize-online-purchases/"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"
            title="Share on Pinterest" >
            <i class="fa fa-pinterest-p share-button"> pinterest</i>
        </a>

        <a  href="http://www.tumblr.com/share/link?url=http://localhost:4000//optimize-online-purchases/"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"
            title="Share on Tumblr" >
            <i class="fa fa-tumblr share-button"> tumblr</i>
        </a>

        <a  href="http://www.reddit.com/submit?url=http://localhost:4000//optimize-online-purchases/"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"
            title="Share on Reddit" >
            <i class="fa fa-reddit-alien share-button"> reddit</i>
        </a>

        <a  href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000//optimize-online-purchases/&title=Optimize a basket in online purchases&summary=Fill a basket with the most valuable goods under a given budget to optimize online purchases. Do it with bitmasks and functional programming&source=CODER SITE for developers"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
            title="Share on LinkedIn" >
            <i class="fa fa-linkedin share-button"> linkedin</i>
        </a>

        <a  href="mailto:?subject=Optimize a basket in online purchases&amp;body=Check out this site http://localhost:4000//optimize-online-purchases/"
            title="Share via Email" >
            <i class="fa fa-envelope share-button"> email</i>
        </a>
    </div>

</div>
<style type="text/css">
/* Share Bar */
#share-bar {
    font-size: 20px;
}
/* Title */
#share-bar h4 {
    margin-bottom: 10px;
    font-weight: 500;
}
/* All buttons */
.share-buttons {
}
/* Each button */
.share-button {
    margin: 0px;
    margin-bottom: 10px;
    margin-right: 3px;
    border: 1px solid #D3D6D2;
    padding: 5px 10px 5px 10px;
}
.share-button:hover {
    opacity: 1;
    color: #ffffff;
}
/* Facebook button */
.fa-facebook-official {
    color: #3b5998;
}
.fa-facebook-official:hover {
    background-color: #3b5998;
}
/* Twitter button */
.fa-twitter {
    color: #55acee;
}
.fa-twitter:hover {
    background-color: #55acee;
}
/* Google-PLus button */
.fa-google-plus {
    color: #dd4b39;
}
.fa-google-plus:hover {
    background-color: #dd4b39;
}
/* Pinterest button */
.fa-pinterest-p {
    color: #cb2027;
}
.fa-pinterest-p:hover {
    background-color: #cb2027;
}
/* Tumblr button */
.fa-tumblr {
    color: #32506d;
}
.fa-tumblr:hover {
    background-color: #32506d;
}
/* Reddit button */
.fa-reddit-alien {
    color: #ff4500;
}
.fa-reddit-alien:hover {
    background-color: #ff4500;
}
/* LinkedIn button */
.fa-linkedin {
    color: #007bb5;
}
.fa-linkedin:hover {
    background-color: #007bb5;
}
/* Email button */
.fa-envelope {
    color: #444444;
}
.fa-envelope:hover {
    background-color: #444444;
}
    
</style>
	<br/>
<p>Please contribute to the production of this content by leaving a tiny donation or sharing this article.</p>

<form action="https://www.paypal.com/donate" method="post" target="_top">
<input type="hidden" name="hosted_button_id" value="UF4T364RTPPMJ" />
<input type="image" src="https://www.paypalobjects.com/en_US/GB/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
<img alt="pixel" title="pixel paypal" border="0" src="https://www.paypal.com/en_GB/i/scr/pixel.gif" width="1" height="1" />
</form>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9154513114335042"
     crossorigin="anonymous"></script>
<!-- ad below post -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-9154513114335042"
     data-ad-slot="2720551629"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
  </div><a class="u-url" href="/optimize-online-purchases/" hidden></a>
</article>

      </div>
    </main>    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9154513114335042"
		 crossorigin="anonymous"></script>
	<ins class="adsbygoogle"
		 style="display:block"
		 data-ad-format="autorelaxed"
		 data-ad-client="ca-pub-9154513114335042"
		 data-ad-slot="1269872539"></ins>
	<script>
		 (adsbygoogle = window.adsbygoogle || []).push({});
	</script><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading"><a rel="author" href="/">CODER SITE for developers</a></h2>
    
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Moises Gamio</li><li><a class="u-email" href="mailto:codersitedev@gmail.com">codersitedev@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/mgamio"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">mgamio</span></a></li><li><a href="https://www.twitter.com/MoisesGamio"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">MoisesGamio</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Do you like coding? Make what is complex been easy to understand by learning the fundamentals of computer science and software design.</p>
		<a href="http://localhost:4000/policies/policy.html">Privacy policy</a>
		<br/>
		<a href="http://localhost:4000/policies/termsOfService.html">Terms of service</a>
		<br/>
		<a href="http://localhost:4000/policies/impressum.html">Impressum</a>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
